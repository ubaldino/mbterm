<!DOCTYPE html>

<html>
    <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
        <meta name="msapplication-tap-highlight" content="no" />
        <title>MbTerm</title>
        <link rel="stylesheet" type="text/css" href="css/index.css" />
        <link rel="stylesheet" href="css/lungo.css">
        <link rel="stylesheet" href="css/lungo.icon.css">
        <link rel="stylesheet" href="css/lungo.icon.brand.css">
        <link rel="stylesheet" href="css/lungo.theme.css">
        <link rel="stylesheet" type="text/css" href="css/estilos.css">
        <link rel="stylesheet" type="text/css" href="css/topcoat-mobile-light.min.css">
 
    </head>
    <body>

        <section id="main">
            <!--<header data-title="groupbar"></header>-->

            <article id="article_1" >
                <div id="connn">
                    <div id="connection">

                        <div class="dispositivo">
                            Dispositivo: <br/>
                            <select id="deviceList" class="anchor">
                                <option>Buscando...</option>
                            </select>    
                        </div>

                        <div class="estado">
                            <a class="topcoat-button--large is-disabled" id="connectButton">Conectar</a>
                            <a class="topcoat-button--large" id="listButton">Listar Dispositivos</a>
                        </div>
                    </div>

                    <div id="chat">
                        <form id="chatform">
                            <textarea id="messages" readonly></textarea>                    
                            <input type="text" class="topcoat-text-input" id="message" placeholder="Mensage" />
                            <a class="topcoat-button--cta" id="sendButton">Enviar</a>
                            <a class="topcoat-button" id="disconnectButton">Desconectar</a>                
                        </form>
                    </div>
                </div>
            </article>

            <article id="article_2" >
                <div>
                    <h1>Control</h1>
                    <ul>
                        <li>Ubaldino Zurita</li>
                        <li>Rudy Rafael Ramirez Caero Gates</li>
                    </ul>
                </div>    
            </article>

            <article id="article_3" class="active">

                    <div id='controller' class="joydiv-controller">
                        <div id="bgcontroller"></div>
                        
                        <div class="joydiv-up"></div>
                        <div class="joydiv-left"></div>
                        <div class="joydiv-right"></div>
                        <div class="joydiv-down"></div>
                        
                        <div class="joydiv-trackpad">
                            <div class="joydiv-tracker"></div>
                        </div>
                    </div>
 
                    <div id='controller2' class="joydiv-controller">
                        <div id="bgcontroller2"></div>
                        <div class="joydiv-up"></div>
                        <div class="joydiv-left"></div>
                        <div class="joydiv-right"></div>
                        <div class="joydiv-down"></div>
                        <div class="joydiv-trackpad">
                            <div class="joydiv-tracker"></div>
                        </div>
                    </div>

                <input type="text" id="direction" readonly>



            </article>
            <footer>
                <nav data-control="groupbar">
                    <a href="#" data-view-article="article_1" class="active">Consola</a>
                    <a href="#" data-view-article="article_2" >Acerca de</a>
                    <a href="#" data-view-article="article_3" >Joystick</a>
                </nav>
            </footer>
            <div id="statusMessage"></div>
        </section>


        <script src="js/quo.js"></script>
        <script src="js/lungo.js"></script>
        <script charset="UTF-8" src="js/joydiv.js"></script>
        <script type="text/javascript" src="cordova.js"></script>
        <script type="text/javascript" src="js/index.js"></script>
        <script type="text/javascript">
            app.initialize();
            Lungo.init( {
                "name": "Mi primera aplicacion",
                "version": "0.0.1"
            } );

            var element = document.getElementById('controller');
            var joydiv = new JoydivModule.Joydiv( { 'element' : element } );
            
            // conduccion

            element.addEventListener( 'joydiv-changed' , function( e ) {
                document.getElementById( 'direction' ).value = joydiv.getOneOf8Directions().name;
                
                aux = joydiv.getOneOf8Directions().name ;
                
                if ( aux == 'up' )
                    aux = "a4";
                else if ( aux == 'right' )
                    aux = "d4";
                else if ( aux == 'left' )
                    aux = "i4";
                else if ( aux == 'down' )
                    aux = "r4";
                else if ( aux == 'up-right' )
                    aux = "E4";
                else if ( aux == 'down-right' )
                    aux = "D4";
                else if ( aux == 'down-left' )
                    aux = "I4";
                else if ( aux == 'up-left' )
                    aux = "H4";

                app.sendDataC( aux );
            });

            // mando

            var element2 = document.getElementById('controller2');
            var joydiv2 = new JoydivModule.Joydiv( { 'element' : element2 } );
            
            element2.addEventListener( 'joydiv-changed' , function( e ) {
                document.getElementById( 'direction' ).value = joydiv2.getOneOf8Directions().name;
               
                aux = joydiv2.getOneOf8Directions().name ;
              

                if ( aux == 'up' )
                    aux = "J";
                else if ( aux == 'right' )
                    aux = "M";
                else if ( aux == 'left' )
                    aux = "L";
                else if ( aux == 'down' )
                    aux = "K";
                /*
                else if ( aux == 'up-right' )
                    aux = "E4";
                else if ( aux == 'down-right' )
                    aux = "D4";
                else if ( aux == 'down-left' )
                    aux = "I4";
                else if ( aux == 'up-left' )
                    aux = "H4";
                */
                app.sendDataC( aux );



            });



            /*

            var joydiv_l = document.getElementById('joydiv-l');

            joydiv_l.addEventListener('click', function() {
                setTimeout(function() {
                    app.sendDataC("l");
                }, 30);
                setTimeout(function() {
                    app.sendDataC("l");
                }, 30);
                setTimeout(function() {
                    app.sendDataC("l");
                }, 30);
                setTimeout(function() {
                    app.sendDataC("l");
                }, 30);
            }, false);

                
            var joydiv_m = document.getElementById('joydiv-m');

            joydiv_m.addEventListener('click', function() {
                setTimeout(function() {
                    app.sendDataC("m");
                }, 30);
                setTimeout(function() {
                    app.sendDataC("m");
                }, 30);
                setTimeout(function() {
                    app.sendDataC("m");
                }, 30);
                setTimeout(function() {
                    app.sendDataC("m");
                }, 30);
            }, false);

            var joydiv_n = document.getElementById('joydiv-n');

            joydiv_n.addEventListener('click', function() {
                setTimeout(function() {
                    app.sendDataC("n");
                }, 30);
                setTimeout(function() {
                    app.sendDataC("n");
                }, 30);
                setTimeout(function() {
                    app.sendDataC("n");
                }, 30);
                setTimeout(function() {
                    app.sendDataC("n");
                }, 30);
            }, false);
            */
        </script>
    </body>
</html>
